import React, { Component } from "react";
import { Button, FormGroup, FormControl, ControlLabel } from "react-bootstrap";
import { Container, Col, Row } from 'reactstrap';
import "./Login.css";
import { Link } from "react-router-dom";
import { Auth } from "aws-amplify";
import { Image } from "react-bootstrap";
import woods from "./woods.png";


export default class Login extends Component {
  constructor(props) {
    super(props);

    this.state = {
      email: "",
      password: ""
    };
  }

  validateForm() {
    return this.state.email.length > 0 && this.state.password.length > 0;
  }

  handleChange = event => {
    this.setState({
      [event.target.id]: event.target.value
    });
  }

  handleSubmit = async event => {
    event.preventDefault();
  
    try {
      await Auth.signIn(this.state.email, this.state.password);
      this.props.userHasAuthenticated(true);
      this.props.history.push("/");

    //   alert("Logged in");
    
    this.props.updateName(this.state.email);
    } catch (e) {
      alert(e.message);
    }
  }
  

  render() {
    return (
      <Container className="fill" fluid>
          <Col className="leftCol">
          <div className="logoContainer">
            <Image src={woods} fluid />
            <rect fill="#323D27" fillOpacity="0.3" stroke="#979797"/>
            <div className="logoSVG">
              <svg width="403" height="240" viewBox="0 0 403 240" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2.4 172.384C2.4 169.184 3.2 166.192 4.8 163.408C6.432 160.624 8.624 158.416 11.376 156.784C14.16 155.12 17.168 154.288 20.4 154.288C23.632 154.288 26.624 155.12 29.376 156.784C32.16 158.416 34.368 160.624 36 163.408C37.664 166.192 38.496 169.184 38.496 172.384C38.496 175.648 37.664 178.656 36 181.408C34.368 184.16 32.16 186.352 29.376 187.984C26.624 189.584 23.632 190.384 20.4 190.384C17.136 190.384 14.128 189.584 11.376 187.984C8.624 186.352 6.432 184.16 4.8 181.408C3.2 178.656 2.4 175.648 2.4 172.384ZM9.6 172.384C9.6 174.432 10.08 176.32 11.04 178.048C12.032 179.776 13.36 181.152 15.024 182.176C16.72 183.168 18.592 183.664 20.64 183.664C22.624 183.664 24.432 183.168 26.064 182.176C27.696 181.152 28.976 179.792 29.904 178.096C30.832 176.368 31.296 174.464 31.296 172.384C31.296 170.272 30.816 168.352 29.856 166.624C28.896 164.896 27.584 163.536 25.92 162.544C24.288 161.52 22.464 161.008 20.448 161.008C18.432 161.008 16.592 161.52 14.928 162.544C13.296 163.536 12 164.896 11.04 166.624C10.08 168.352 9.6 170.272 9.6 172.384ZM67.8283 154.672V161.392H52.7083V169.408H65.8123V176.128H52.7083V190H45.7483V154.672H67.8283ZM96.9229 154.672V161.392H81.8029V169.408H94.9069V176.128H81.8029V190H74.8429V154.672H96.9229ZM141.268 154.672V161.392H132.676V190H125.716V161.392H117.46V154.672H141.268ZM178.01 190H171.05V175.648H155.258V190H148.298V154.672H155.258V168.928H171.05V154.672H178.01V190ZM211.52 154.672V161.392H194.384V168.928H209.552V175.648H194.384V183.28H212.192V190H187.424V154.672H211.52ZM257.037 154.672V161.392H248.445V190H241.485V161.392H233.229V154.672H257.037ZM283.123 190L275.683 178.768H271.027V190H264.067V154.672H274.771C279.155 154.672 282.547 155.744 284.947 157.888C287.379 160 288.595 162.896 288.595 166.576C288.595 168.752 288.131 170.8 287.203 172.72C286.307 174.608 284.915 176.096 283.027 177.184L291.235 190H283.123ZM271.027 172.048H275.971C277.859 172.048 279.235 171.504 280.099 170.416C280.963 169.296 281.395 168.096 281.395 166.816C281.395 165.536 281.027 164.32 280.291 163.168C279.555 161.984 278.131 161.392 276.019 161.392H271.027V172.048ZM314.759 183.088H303.047L300.167 190H293.303L309.239 153.28H309.623L325.559 190H317.495L314.759 183.088ZM312.455 177.232L309.047 168.64L305.495 177.232H312.455ZM337.982 154.672V190H331.022V154.672H337.982ZM354.374 154.672V183.28H370.982V190H347.414V154.672H354.374ZM397.341 163.216C394.269 161.52 391.597 160.672 389.325 160.672C387.789 160.672 386.589 160.976 385.725 161.584C384.893 162.192 384.477 163.104 384.477 164.32C384.477 165.44 385.085 166.432 386.301 167.296C387.549 168.128 389.197 168.928 391.245 169.696C392.909 170.304 394.333 171.008 395.517 171.808C396.701 172.576 397.677 173.648 398.445 175.024C399.245 176.4 399.645 178.144 399.645 180.256C399.645 182.08 399.165 183.776 398.205 185.344C397.277 186.88 395.901 188.112 394.077 189.04C392.253 189.936 390.077 190.384 387.549 190.384C385.437 190.384 383.341 190.08 381.261 189.472C379.181 188.832 377.245 187.872 375.453 186.592L378.525 181.168C379.741 182.064 381.133 182.8 382.701 183.376C384.269 183.952 385.677 184.24 386.925 184.24C388.397 184.24 389.677 183.936 390.765 183.328C391.853 182.688 392.397 181.664 392.397 180.256C392.397 178.432 390.685 176.848 387.261 175.504C385.245 174.704 383.565 173.936 382.221 173.2C380.877 172.464 379.709 171.408 378.717 170.032C377.757 168.656 377.277 166.928 377.277 164.848C377.277 161.808 378.269 159.36 380.253 157.504C382.269 155.648 384.941 154.64 388.269 154.48C390.893 154.48 393.085 154.784 394.845 155.392C396.605 155.968 398.317 156.8 399.981 157.888L397.341 163.216Z" fill="white"/>
                <path fillRule="evenodd" clip-rule="evenodd" d="M335.366 223H67.6383C66.1804 223 65 222.776 65 222.5C65 222.224 66.1804 222 67.6383 222H335.366C336.82 222 338 222.224 338 222.5C338 222.776 336.82 223 335.366 223Z" fill="white"/>
                <path d="M335.366 223H67.6383C66.1804 223 65 222.776 65 222.5C65 222.224 66.1804 222 67.6383 222H335.366C336.82 222 338 222.224 338 222.5C338 222.776 336.82 223 335.366 223" stroke="white" stroke-width="3"/>
                <path fillRule="evenodd" clip-rule="evenodd" d="M335.366 238H67.6383C66.1804 238 65 237.776 65 237.5C65 237.224 66.1804 237 67.6383 237H335.366C336.82 237 338 237.224 338 237.5C338 237.776 336.82 238 335.366 238Z" fill="white"/>
                <path d="M335.366 238H67.6383C66.1804 238 65 237.776 65 237.5C65 237.224 66.1804 237 67.6383 237H335.366C336.82 237 338 237.224 338 237.5C338 237.776 336.82 238 335.366 238" stroke="white" stroke-width="3"/>
                <path fillRule="evenodd" clip-rule="evenodd" d="M36 153.139C38.2329 152.801 40.2311 151.24 42.153 149.715C45.9824 146.677 54.6946 135.481 59.2913 137.901C60.1775 138.368 60.9807 139.135 61.9203 139.353C62.9625 139.596 64.0168 139.13 65.0121 138.659C74.4609 134.19 87.3233 129.267 94.7804 120.218C92.9546 131.708 87.8483 142.253 80.6858 149.329C99.2473 138.582 114.379 118.089 121.937 93.4615C124.913 97.3529 126.09 102.923 127.57 108.073C136.047 137.559 158.898 158.972 182.983 160C172.743 153.602 163.574 144.296 156.298 132.912C154.714 130.435 153.143 127.567 153.247 124.341C153.356 120.927 155.299 118.148 157.16 115.746C168.662 100.902 181.441 87.7528 195.18 76.6236C194.032 87.3449 190.732 97.6582 185.699 106.255C188.211 101.966 194.048 99.3856 197.02 94.5071C200.573 88.6743 203.136 81.9201 205.847 75.4012C207.545 71.3172 221.503 39.6071 226.312 47.9048C227.715 50.3255 227.139 53.7476 226.499 56.6675C220.615 83.5477 214.73 110.428 208.846 137.308C221.796 114.255 232.045 88.6158 239.13 61.5574C240.574 56.0441 242.965 49.3769 247.423 49.3755C251.671 49.374 254.129 55.4935 255.676 60.663C261.053 78.6121 267.234 96.5441 277.029 110.954C286.824 125.366 300.815 135.964 315.558 135.478C302.306 129.87 292.762 111.9 293.376 93.7126C299.569 102.88 305.762 112.05 311.954 121.219C316.171 127.464 320.439 133.769 325.643 138.577C337.448 149.49 352.599 151.518 367 153.2C342.975 143.014 328.404 112.261 313.833 85.2951C312.335 82.522 310.722 79.6591 308.391 78.1599C306.571 76.9888 304.494 76.7706 302.489 76.364C289.48 73.7236 278.322 62.5802 269.648 49.6365C260.975 36.6928 254.238 21.7479 246.102 8.22077C243.784 4.36506 240.922 0.32819 237.179 0.0186493C234.265 -0.220995 231.574 1.89016 229.132 3.97992C215.16 15.9365 202.126 29.7645 190.302 45.1788C179.694 59.0055 169.81 74.3584 156.727 83.8971C155.522 84.7744 154.201 85.6246 152.831 85.4306C150.961 85.1667 149.597 83.0898 148.382 81.2125C143.066 72.9976 136.814 65.8168 129.899 59.9797C128.78 59.0369 127.566 58.0968 126.236 58.104C124.783 58.1125 123.49 59.2423 122.321 60.3692C117.379 65.1307 112.851 70.6282 108.852 76.7178C98.4321 92.5885 90.7109 115.582 75.4725 124.798C69.3763 128.484 63.4526 126.328 57.0475 127.752C48.0483 129.752 41.7612 144.479 36 153.139Z" fill="white"/>
              </svg>
            </div>
          </div>
          </Col>
          <Col className="Login" align="center">
            <div className="loginDiv">
              <h1>Login</h1>
              <form onSubmit={this.handleSubmit}>
                <FormGroup controlId="email" bsSize="large">
                  {/* <ControlLabel>Email</ControlLabel> */}
                  <FormControl
                    autoFocus
                    value={this.state.email}
                    onChange={this.handleChange}
                    placeholder="Email"
                  />
                </FormGroup>
                <FormGroup controlId="password" bsSize="large">
                  {/* <ControlLabel>Password</ControlLabel> */}
                  <FormControl
                    value={this.state.password}
                    onChange={this.handleChange}
                    type="password"
                    placeholder="Password"
                  />
                </FormGroup>
                <Button
                  block
                  bsSize="large"
                  disabled={!this.validateForm()}
                  type="submit"
                >
                  Login
                </Button>
              </form>
              <p className="text-center">
                New User? <Link to="/signup">Sign Up!</Link>
              </p>
            </div>
            
          </Col>
        
      </Container>
          
         
      // </div>
    );
  }
}
